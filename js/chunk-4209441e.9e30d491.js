(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4209441e"],{"25b4":function(e,t,o){},"2a48":function(e,t,o){"use strict";o.d(t,"k",(function(){return r})),o.d(t,"f",(function(){return d})),o.d(t,"g",(function(){return u})),o.d(t,"e",(function(){return m})),o.d(t,"i",(function(){return f})),o.d(t,"h",(function(){return v})),o.d(t,"j",(function(){return h})),o.d(t,"d",(function(){return V})),o.d(t,"c",(function(){return y})),o.d(t,"b",(function(){return O})),o.d(t,"a",(function(){return k}));var n=o("c964"),i=(o("96cf"),o("7424")),a=o("b775");function r(e){return s.apply(this,arguments)}function s(){return(s=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.VIDEOLIST,a.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return c.apply(this,arguments)}function c(){return(c=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.HISTORYVIDEOLIST,a.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return(l=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.SNAPHISTORYIMAGESLIST,a.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return(p=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.HISTORYIMAGESLIST,a.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.VIDEODEL,a.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return(b=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.VIDEOADD,a.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return S.apply(this,arguments)}function S(){return(S=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.VIDEOEDIT,a.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return w.apply(this,arguments)}function w(){return(w=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.GETVIDEOSTATUS,a.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return T.apply(this,arguments)}function T(){return(T=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.SETVIDEOSTOPORSTART,a.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return C.apply(this,arguments)}function C(){return(C=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.PTZCONTROL,a.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return I.apply(this,arguments)}function I(){return(I=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.GETMONIBUCA,a.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"84b3":function(e,t,o){"use strict";o("25b4")},a8d0:function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"a",(function(){return d}));var n=o("c964"),i=(o("96cf"),o("7424")),a=o("b775");function r(){return s.apply(this,arguments)}function s(){return(s=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.SYSTEMIMAGELIST,a.b.POST));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return c.apply(this,arguments)}function c(){return(c=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.g)(i.SYSTEMIMAGEDEL,a.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},dc3d:function(e,t,o){"use strict";var n=o("f3f3"),i=(o("b0c0"),o("2a48")),a=o("2f62"),r=o("c1df"),s=o.n(r),d=o("a8d0"),c=o("7424"),u={name:"SystemVideoModel",i18n:o("89fe"),data:function(){return{AddForm:this.$form.createForm(this),radioValue:1,GBVideoList:[],MonibucaServer:"",visible:!1,addVisible:!1,messageShowLoad:!1,VideoServer:location.host,uploadUrl:c.SYSTEMIMAGEUPLOAD,videoList:[],GBColumns:[{width:"5%",slotName:"configComponent.video.TableVideoIndex",scopedSlots:{customRender:"TableVideoIndex",title:"configComponent.video.TableVideoIndex"},dataIndex:"TableVideoIndex"},{width:"10%",slotName:"configComponent.video.TableVideoName",scopedSlots:{customRender:"Name",title:"configComponent.video.TableVideoName"},dataIndex:"Name"},{slotName:"configComponent.video.Manufacturer",width:"10%",scopedSlots:{customRender:"Manufacturer",title:"configComponent.video.Manufacturer"},dataIndex:"Manufacturer"},{slotName:"configComponent.video.Model",width:"15%",scopedSlots:{customRender:"Model",title:"configComponent.video.Model"},dataIndex:"Model"},{slotName:"configComponent.video.RegisterTime",width:"10%",scopedSlots:{customRender:"RegisterTime",title:"configComponent.video.RegisterTime"},dataIndex:"RegisterTime"},{slotName:"configComponent.video.UpdateTime",width:"10%",scopedSlots:{customRender:"UpdateTime",title:"configComponent.video.UpdateTime"},dataIndex:"UpdateTime"},{slotName:"configComponent.video.TableVideoOpt",width:"5%",scopedSlots:{customRender:"Opt",title:"configComponent.video.TableVideoOpt"}}],columns:[{width:"10%",slotName:"configComponent.video.TableVideoName",scopedSlots:{customRender:"Name",title:"configComponent.video.TableVideoName"},dataIndex:"Name"},{slotName:"configComponent.video.TableVideoIP",width:"10%",scopedSlots:{customRender:"IP",title:"configComponent.video.TableVideoIP"},dataIndex:"ip"},{slotName:"configComponent.video.TableVideoPort",width:"5%",scopedSlots:{customRender:"Port",title:"configComponent.video.TableVideoPort"},dataIndex:"port"},{slotName:"configComponent.video.TableVideoPassword",width:"10%",scopedSlots:{customRender:"Password",title:"configComponent.video.TableVideoPassword"},dataIndex:"password"},{slotName:"configComponent.video.TableVideoUser",width:"10%",scopedSlots:{customRender:"User",title:"configComponent.video.TableVideoUser"},dataIndex:"user"},{slotName:"configComponent.video.TableVideoStatus",width:"5%",scopedSlots:{customRender:"Status",title:"configComponent.video.TableVideoStatus"},dataIndex:"status"},{slotName:"configComponent.video.TableVideoOpt",width:"10%",scopedSlots:{customRender:"Opt",title:"configComponent.video.TableVideoOpt"}}],columnsPhone:[{width:"15%",slotName:"configComponent.video.TableVideoName",scopedSlots:{customRender:"Name",title:"configComponent.video.TableVideoName"},dataIndex:"Name"},{slotName:"configComponent.video.TableVideoOpt",width:"10%",scopedSlots:{customRender:"Opt",title:"configComponent.video.TableVideoOpt"}}],GBColumnsPhone:[{width:"10%",slotName:"configComponent.video.TableVideoName",scopedSlots:{customRender:"Name",title:"configComponent.video.TableVideoName"},dataIndex:"Name"},{slotName:"configComponent.video.TableVideoOpt",width:"5%",scopedSlots:{customRender:"Opt",title:"configComponent.video.TableVideoOpt"}}],pagination:{pageSize:15,showSizeChanger:!0},LocalVideoList:[],paginationPhone:{pageSize:5,showSizeChanger:!0}}},props:{networkVideo:{type:Object,required:!0}},mounted:function(){this.getSystemVideoList()},computed:Object(n.a)({},Object(a.e)("setting",["isMobile","videoServer"])),methods:{formatDateTime:function(e){var t=new Date(e),o=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var i=t.getDate();i=i<10?"0"+i:i;var a=t.getHours();a=a<10?"0"+a:a;var r=t.getMinutes();r=r<10?"0"+r:r;var s=t.getSeconds();return o+"-"+n+"-"+i+" "+a+":"+r+":"+(s=s<10?"0"+s:s)},onChangeGroup:function(e){1==e.target.value?this.getSystemVideoList():3==e.target.value?this.getGB28281VideoList():4==e.target.value&&this.getSystemLocalVideoList()},AddVideoAction:function(){var e=this,t=this;this.AddForm.validateFields((function(o){if(!o){var n={name:e.AddForm.getFieldValue("name"),ip:e.AddForm.getFieldValue("ip"),port:parseInt(e.AddForm.getFieldValue("port")),user:e.AddForm.getFieldValue("user"),password:e.AddForm.getFieldValue("password"),url:e.AddForm.getFieldValue("RtspUrl")};Object(i.h)(n).then((function(e){0==e.data.code?(t.getSystemVideoList(),t.addVisible=!1):t.$message.success(t.$t("alarm.trigger.AddFailed"))}))}}))},getSystemVideoList:function(){var e=this;e.videoList=[],e.messageShowLoad=!0,Object(i.k)().then((function(t){if(null!=t.data.list)for(var o={},n=0;n<t.data.list.length;n++)o.key=t.data.list[n].Uuid,o.ip=t.data.list[n].Ip,o.Name=t.data.list[n].Name,o.port=t.data.list[n].Port,o.password=t.data.list[n].Password,o.user=t.data.list[n].User,o.status=t.data.list[n].Status,o.uuid=t.data.list[n].Uuid,e.videoList.push(o),o={};e.messageShowLoad=!1}))},getGB28281VideoList:function(){var e=this;e.messageShowLoad=!0,e.GBVideoList=[],Object(i.a)().then((function(t){if(0==t.data.code){e.MonibucaServer=t.data.MonibucaServer;for(var o=JSON.parse(t.data.data),n=0,i=0;i<o.length;i++)for(var a=0;a<o[i].Channels.length;a++){var r={};r.Manufacturer=o[i].Manufacturer,r.RegisterTime=s()(o[i].RegisterTime).format("yyyy-MM-DD HH:mm:ss"),r.UpdateTime=s()(o[i].UpdateTime).format("yyyy-MM-DD HH:mm:ss"),r.TableVideoIndex=n,r.Name=""==o[i].Channels[a].Name?o[i].Name:o[i].Channels[a].Name,r.Model=o[i].Channels[a].Model,r.Status=o[i].Channels[a].Status,r.LiveSubSP=o[i].ID+"/"+o[i].Channels[a].DeviceID,n++,e.GBVideoList.push(r),r={}}}e.messageShowLoad=!1})).catch((function(t){e.messageShowLoad=!1}))},getSystemLocalVideoList:function(){var e=this;e.LocalVideoList=[],Object(d.b)().then((function(t){if(null!=t.data.list){e.imageList=[],e.model3DList=[];for(var o=0;o<t.data.list.length;o++){var n={};n.imgurl=t.data.list[o].path,n.name=t.data.list[o].name,n.startAt=e.formatDateTime(t.data.list[o].UpdatedAt),4==t.data.list[o].type&&e.LocalVideoList.push(n),n={}}}}))},showModal:function(){this.visible=!0},selectVideo:function(e,t,o){var n="";n=1==e?"webrtc://"+this.videoServer+"/webrtcstream/"+t:3==e?this.MonibucaServer+"hdl/"+t+".flv":t,this.$emit("onSelectVideo",{type:e,key:t,url:n,name:o}),this.visible=!1},delVideo:function(e){var t=this,o={uuid:e};Object(i.i)(o).then((function(e){0==e.data.code?(t.getSystemVideoList(),t.$message.success(t.$t("component.systemImageModel.delImageSuccess"))):t.$message.error(t.$t("component.systemImageModel.delImageFailed"))}))},handleCancel:function(){this.visible=!1},afterUpload:function(e){"done"===e.file.status&&(2002==e.file.response.Code?(this.getSystemLocalVideoList(),this.$message.success(this.$t("component.systemImageModel.uploadSuccess"))):this.$message.error(this.$t("component.systemImageModel.uploadFailed")))}}},l=(o("84b3"),o("2877")),m=Object(l.a)(u,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("a-modal",{directives:[{name:"drag-modal",rawName:"v-drag-modal"}],attrs:{footer:null,width:e.isMobile?"300px":"1000px",title:e.$t("configComponent.video.ModelTitle"),"on-ok":"handleOk"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[o("div",{staticStyle:{padding:"10px"}},[e.isMobile?e._e():o("div",[o("a-radio-group",{on:{change:e.onChangeGroup},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[o("a-radio",{attrs:{value:1}},[e._v(" "+e._s(e.$t("configComponent.video.CamVideo"))+" ")]),o("a-radio",{attrs:{value:3}},[e._v(" "+e._s(e.$t("configComponent.video.NetworkGB28281Video"))+" ")]),o("a-radio",{attrs:{value:2}},[e._v(" "+e._s(e.$t("configComponent.video.NetworkVideo"))+" ")]),o("a-radio",{attrs:{value:4}},[e._v(" "+e._s(e.$t("configComponent.video.LocalVideo"))+" ")])],1),o("a-divider",{attrs:{dashed:""}})],1),1==e.radioValue?o("div",[e.isMobile?e._e():o("a-button",{attrs:{disabled:e.messageShowLoad,type:"default"},on:{click:function(t){return e.getSystemVideoList()}}},[e._v(" "+e._s(e.$t("configComponent.video.VideoRefresh"))+" ")]),o("div",[o("a-table",{attrs:{rowKey:"Name",pagination:e.isMobile?e.paginationPhone:e.pagination,columns:e.isMobile?e.columnsPhone:e.columns,"data-source":e.videoList},scopedSlots:e._u([{key:"Status",fn:function(t){return o("span",{},[1==t?o("div",{staticStyle:{color:"#74f808"}},[e._v(" "+e._s(e.$t("configComponent.video.VideoOnline"))+" ")]):0==t?o("div",{staticStyle:{color:"#ea1111"}},[e._v(" "+e._s(e.$t("configComponent.video.VideoOffline"))+" ")]):e._e()])}},{key:"Opt",fn:function(t,n){return o("div",{},[o("a",{staticStyle:{cursor:"pointer",color:"#13C2C2"},attrs:{type:"link"},on:{click:function(t){return e.selectVideo(1,n.key,n.Name)}}},[o("a-icon",{attrs:{type:"check"}}),o("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("configComponent.video.SelectVideo")))])],1)])}}],null,!1,3789411201)},[e._l(e.columns,(function(t,n){return o("template",{slot:t.slotName},[o("span",{key:n},[e._v(e._s(e.$t(t.slotName)))])])}))],2)],1)],1):e._e(),3==e.radioValue?o("div",[e.isMobile?e._e():o("a-button",{attrs:{disabled:e.messageShowLoad,type:"default"},on:{click:function(t){return e.getGB28281VideoList()}}},[e._v(" "+e._s(e.$t("configComponent.video.VideoRefresh"))+" ")]),o("div",[o("a-table",{attrs:{rowKey:"TableVideoIndex",pagination:e.isMobile?e.paginationPhone:e.pagination,columns:e.isMobile?e.GBColumnsPhone:e.GBColumns,"data-source":e.GBVideoList},scopedSlots:e._u([{key:"Opt",fn:function(t,n){return o("div",{},[o("a",{staticStyle:{cursor:"pointer",color:"#13C2C2"},attrs:{type:"link"},on:{click:function(t){return e.selectVideo(3,n.LiveSubSP,n.Name)}}},[o("a-icon",{attrs:{type:"check"}}),o("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("configComponent.video.SelectVideo")))])],1)])}}],null,!1,4088494279)},[e._l(e.GBColumns,(function(t,n){return e.isMobile?e._l(e.GBColumnsPhone,(function(t,n){return o("template",{slot:t.slotName},[o("span",{key:n},[e._v(e._s(e.$t(t.slotName)))])])})):o("template",{slot:t.slotName},[o("span",{key:n},[e._v(e._s(e.$t(t.slotName)))])])}))],2)],1)],1):e._e(),2!=e.radioValue||e.isMobile?e._e():o("div",[o("a-form",{attrs:{"label-col":{span:3},"wrapper-col":{span:20}}},[o("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoName")}},[o("a-input",{attrs:{"default-value":e.networkVideo.name},model:{value:e.networkVideo.name,callback:function(t){e.$set(e.networkVideo,"name",t)},expression:"networkVideo.name"}})],1),o("a-form-item",{attrs:{label:e.$t("configComponent.video.NetworkVideoUrl")}},[o("a-input",{attrs:{"default-value":e.networkVideo.url},model:{value:e.networkVideo.url,callback:function(t){e.$set(e.networkVideo,"url",t)},expression:"networkVideo.url"}})],1),o("a-form-item",[o("div",{staticStyle:{"margin-top":"5px","margin-left":"120px"}},[o("a-button",{key:"submit",attrs:{type:"primary"},on:{click:function(t){return e.selectVideo(0,e.networkVideo.url,e.networkVideo.name)}}},[e._v(e._s(e.$t("component.systemImageModel.networkImageBtn")))])],1)])],1)],1),4==e.radioValue?o("div",[o("div",{staticStyle:{padding:"10px",height:"auto"}},[o("div",{staticStyle:{"margin-bottom":"5px"}},[o("a-upload",{attrs:{name:"file",multiple:!0,action:e.uploadUrl,showUploadList:!1},on:{change:e.afterUpload}},[o("a-button",[o("a-icon",{attrs:{type:"upload"}}),e._v(" "+e._s(e.$t("displayConfig.Properties.upload"))+" ")],1)],1)],1),o("div",[o("div",[o("a-list",{attrs:{size:"small",pagination:e.pagination,"data-source":e.LocalVideoList},scopedSlots:e._u([{key:"renderItem",fn:function(t,n){return o("a-list-item",{key:n},[o("a",{attrs:{slot:"actions"},on:{click:function(o){return e.selectVideo(4,t.imgurl,t.imgurl)}},slot:"actions"},[e._v(e._s(e.$t("component.systemImageModel.selectImage")))]),o("a-list-item-meta",[o("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])],1)}}],null,!1,2415679132)})],1)])])]):e._e()])])],1)}),[],!1,null,"625d3ec5",null);t.a=m.exports}}]);