(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3d88aa04"],{"380e":function(t,e,r){"use strict";r.r(e);r("d3b7"),r("159b"),r("b0c0"),r("fb6a");var n=r("600d"),a=r("3d15"),o=(r("c1df"),r("cf45")),i=(r("f2d9"),{name:"CurrentAlarm",i18n:r("89fe"),components:{},data:function(){return{dataZ:[],valueData:"",treePageSize:100,scrollPage:1,frontDataZ:[],pagination:{pageSize:15,showSizeChanger:!0},SelectDateType:"Month",SelectDevice:[],SelectDateRange:"",SelectAlarmData:[],deviceTreeData:[],AlarmDataTree:[],messageShowLoad:!1,advanced:!0,refIconLoading:!1,columns:[{slotName:"reporting.AlarmHistory.DeviceName",width:"10%",scopedSlots:{customRender:"DeviceName",title:"reporting.AlarmHistory.DeviceName"},dataIndex:"DeviceName"},{width:"10%",slotName:"reporting.AlarmHistory.AlarmName",scopedSlots:{customRender:"name",title:"reporting.AlarmHistory.AlarmName"},dataIndex:"name"},{width:"10%",slotName:"alarm.current.ShieldTime",scopedSlots:{customRender:"UpdatedAt",title:"alarm.current.ShieldTime"},dataIndex:"UpdatedAt"},{width:"10%",slotName:"reporting.AlarmHistory.AlarmLevel",scopedSlots:{customRender:"AlarmLevel",title:"reporting.AlarmHistory.AlarmLevel"},dataIndex:"alarmLevel"},{slotName:"dataModel.modelTableOpt",width:"10%",scopedSlots:{customRender:"action",title:"dataModel.modelTableOpt"}}],dataSource:[],conditionExpress:"",selectedRows:[]}},authorize:{},mounted:function(){this.QueryAlarmList()},activated:function(){},filters:{formatDate:function(t){var e=new Date(t);return Object(o.a)(e,"yyyy-MM-dd hh:mm:ss")}},created:function(){this.getMonitorTree(),this.GetDeviceModelDataList(),this.QueryAlarmList()},watch:{$route:function(){this.getMonitorTree()}},methods:{ShieldAlarm:function(t,e){var r=this;r.dataSource=[];var n={type:2,update:{duid:t.duid,uuid:t.uuid,AlarmShield:e}};this.messageShowLoad=!0,Object(a.g)(n).then((function(t){0==t.data.code&&r.QueryAlarmList(),r.messageShowLoad=!1})).catch((function(){r.$message.error(r.$t("loginPage.serverError"),3)}))},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},handleSearch:function(t){var e=this;this.valueData=t,t?(this.frontDataZ=[],this.scrollPage=1,this.dataZ.forEach((function(r){r.name.indexOf(t)>=0&&e.frontDataZ.push(r)})),this.allDataZ=this.frontDataZ,this.frontDataZ=this.frontDataZ.slice(0,100)):this.GetDeviceModelDataList()},handlePopupScroll:function(t){var e=t.target,r=e.scrollHeight-e.scrollTop,n=e.clientHeight;if(0===r&&0===n)this.scrollPage=1;else if(r<n+5){this.scrollPage=this.scrollPage+1;var a=this.scrollPage,o=this.treePageSize*(a||1),i=[],c="";c=this.dataZ.length>o?o:this.dataZ.length,this.valueData?this.allDataZ.forEach((function(t,e){e<c&&i.push(t)})):this.dataZ.forEach((function(t,e){e<c&&i.push(t)})),this.frontDataZ=i}},GetDeviceModelDataList:function(){var t=this;this.AlarmDataTree=[],t.dataZ=[],t.frontDataZ=[];Object(n.a)({getType:1}).then((function(e){if(0==e.data.code){for(var r=0;r<e.data.list.length;r++)for(var n=0;n<e.data.list[r].DataList.length;n++)t.dataZ.push(e.data.list[r].DataList[n]),t.AlarmDataTree.push(e.data.list[r].DataList[n]);t.frontDataZ=t.dataZ.slice(0,100)}}))},getMonitorTree:function(){var t=this;this.deviceTreeData=[],Object(n.g)().then((function(e){0==e.data.code&&(t.deviceTreeData=e.data.list)}))},QueryAlarmList:function(){var t=this;t.dataSource=[];var e={deviceList:this.SelectDevice,dataList:this.SelectAlarmData};this.messageShowLoad=!0,Object(a.f)(e).then((function(e){0==e.data.code&&(t.dataSource=e.data.list),t.messageShowLoad=!1})).catch((function(){t.$message.error(t.$t("loginPage.serverError"),3)}))}}}),c=(r("4a49"),r("2877")),u=Object(c.a)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("a-card",[r("div",[r("a-form",{attrs:{layout:"horizontal"}},[r("div",{class:t.advanced?null:"fold"},[r("a-row",[r("a-col",{attrs:{md:8,sm:24}},[r("a-form-item",{attrs:{label:t.$t("reporting.AlarmHistory.DeviceList"),labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[r("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","tree-node-filter-prop":"title","tree-checkable":"","allow-clear":"","dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":t.deviceTreeData,"replace-fields":{value:"key",title:"text"},placeholder:t.$t("reporting.AlarmHistory.DeviceList"),"tree-default-expand-all":""},model:{value:t.SelectDevice,callback:function(e){t.SelectDevice=e},expression:"SelectDevice"}})],1)],1),r("a-col",{attrs:{md:8,sm:24}},[r("a-form-item",{attrs:{label:t.$t("reporting.AlarmHistory.DataList"),labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[r("a-select",{staticStyle:{width:"100%"},attrs:{allowClear:"","show-search":"",optionFilterProp:"children",mode:"multiple","token-separators":[","]},on:{dropdownVisibleChange:t.GetDeviceModelDataList,popupScroll:t.handlePopupScroll,search:t.handleSearch},model:{value:t.SelectAlarmData,callback:function(e){t.SelectAlarmData=e},expression:"SelectAlarmData"}},t._l(t.frontDataZ,(function(e,n){return r("a-select-option",{key:n,attrs:{value:e.uuid}},[t._v(" "+t._s(t.$t(e.name))+" ")])})),1)],1)],1),r("a-col",{attrs:{md:2,sm:24}},[r("span",{staticStyle:{float:"right","margin-top":"3px"}},[r("a-button",{attrs:{disabled:t.messageShowLoad,type:"primary"},on:{click:t.QueryAlarmList}},[t._v(t._s(t.$t("reporting.AlarmHistory.Query")))])],1)])],1),r("a-row")],1)])],1),r("a-spin",{staticStyle:{padding:"1px"},attrs:{spinning:t.messageShowLoad,tip:"Loading..."}},[r("a-table",{attrs:{pagination:t.pagination,columns:t.columns,"data-source":t.dataSource,rowKey:"ID"},scopedSlots:t._u([{key:"UpdatedAt",fn:function(e){return r("span",{},[t._v(" "+t._s(t._f("formatDate")(e))+" ")])}},{key:"name",fn:function(e){return r("span",{},[t._v(" "+t._s(t.$t(e))+" ")])}},{key:"AlarmLevel",fn:function(e){return r("span",{},[0==e?r("a-tag",{staticStyle:{"background-color":"#0099FF"}},[t._v(" "+t._s(t.$t("dataModel.alarm.Tips"))+" ")]):t._e(),1==e?r("a-tag",{staticStyle:{"background-color":"#0099FF"}},[t._v(" "+t._s(t.$t("dataModel.alarm.Minor"))+" ")]):t._e(),2==e?r("a-tag",{staticStyle:{"background-color":"yellow"}},[t._v(" "+t._s(t.$t("dataModel.alarm.Importance"))+" ")]):t._e(),3==e?r("a-tag",{staticStyle:{"background-color":"orange"}},[t._v(" "+t._s(t.$t("dataModel.alarm.Urgency"))+" ")]):4==e?r("a-tag",{staticStyle:{"background-color":"red"}},[t._v(" "+t._s(t.$t("dataModel.alarm.Deadly"))+" ")]):t._e()],1)}},{key:"action",fn:function(e,n){return r("div",{},[r("a-popconfirm",{attrs:{title:t.$t("alarm.current.RestoreTips")},on:{confirm:function(e){return t.ShieldAlarm(n,0)}}},[r("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),r("a",{},[r("a-icon",{attrs:{type:"alert"}}),t._v(t._s(t.$t("alarm.current.Restore")))],1)],1)],1)}}])},[t._l(t.columns,(function(e,n){return r("template",{slot:e.slotName},[r("span",{key:n},[t._v(t._s(t.$t(e.slotName)))])])}))],2)],1)],1)}),[],!1,null,null,null);e.default=u.exports},"3d15":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return u})),r.d(e,"b",(function(){return l})),r.d(e,"d",(function(){return d})),r.d(e,"e",(function(){return m})),r.d(e,"g",(function(){return g})),r.d(e,"f",(function(){return v}));var n=r("c964"),a=(r("96cf"),r("7424")),o=r("b775");function i(t){return c.apply(this,arguments)}function c(){return(c=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.ALARMTRIGGERADD,o.b.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(t){return s.apply(this,arguments)}function s(){return(s=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.ALARMTRIGGEREDIT,o.b.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(t){return p.apply(this,arguments)}function p(){return(p=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.ALARMTRIGGERDEL,o.b.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return(f=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.ALARMTRIGGERLIST,o.b.POST));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.CURRENTALARMLIST,o.b.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){return b.apply(this,arguments)}function b(){return(b=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.UPDATECURRENTALARM,o.b.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return y.apply(this,arguments)}function y(){return(y=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.SHIELDALARMLIST,o.b.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},"4a49":function(t,e,r){"use strict";r("77bb")},"600d":function(t,e,r){"use strict";r.d(e,"g",(function(){return i})),r.d(e,"d",(function(){return u})),r.d(e,"c",(function(){return l})),r.d(e,"f",(function(){return d})),r.d(e,"e",(function(){return m})),r.d(e,"h",(function(){return g})),r.d(e,"i",(function(){return v})),r.d(e,"j",(function(){return S})),r.d(e,"k",(function(){return D})),r.d(e,"a",(function(){return w})),r.d(e,"b",(function(){return A}));var n=r("c964"),a=(r("96cf"),r("7424")),o=r("b775");function i(){return c.apply(this,arguments)}function c(){return(c=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.MONITORTREE,o.b.POST));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(t){return s.apply(this,arguments)}function s(){return(s=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.MONITORADD,o.b.POST,e,{timeout:12e6}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(t){return p.apply(this,arguments)}function p(){return(p=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.PINGICMP,o.b.POST,e,{timeout:12e6}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t){return f.apply(this,arguments)}function f(){return(f=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.MONITOREDIT,o.b.POST,e,{timeout:12e6}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.MONITORDEL,o.b.POST,e,{timeout:12e6}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){return b.apply(this,arguments)}function b(){return(b=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.MONITORREALDATA,o.b.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return y.apply(this,arguments)}function y(){return(y=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.MONITORREALDATABYUUID,o.b.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t){return O.apply(this,arguments)}function O(){return(O=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.SUPPORTDEVICELIST,o.b.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(t){return R.apply(this,arguments)}function R(){return(R=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.SETDATA,o.b.POST,e,{timeout:1e4}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t){return T.apply(this,arguments)}function T(){return(T=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.GETDEVICEMODELDATALIST,o.b.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t){return L.apply(this,arguments)}function L(){return(L=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.g)(a.SETDEVICESTARTORSTOP,o.b.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},"77bb":function(t,e,r){}}]);