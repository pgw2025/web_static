(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f3e69988"],{"0579":function(e,t,i){"use strict";i("6e36")},"6e36":function(e,t,i){},"84d6":function(e,t,i){},"96d4":function(e,t,i){"use strict";i("84d6")},"9cf1":function(e,t,i){"use strict";i.r(t);i("b0c0"),i("a4d3"),i("e01a");var a=i("456a"),o=i("c2f7"),d=i("7424"),s={name:"DisplayModelList",i18n:i("89fe"),data:function(){return{editIndex:0,isEditStatus:0,addAuthVisible:!1,AddModelForm:this.$form.createForm(this),loading:!1,uploadDisPlayUrl:d.DISPLAYIMAGEUPLOAD,visible:!1,listIndex:-1,pagination:{hideOnSinglePage:!0,showQuickJumper:!0,pageSize:3},modelList:[]}},components:{VueHoverMask:o.a},mounted:function(){},activated:function(){},created:function(){this.getModelList()},watch:{$route:function(){this.modelList=[],this.getModelList()}},methods:{updateImageIndex:function(e){this.listIndex=e},beforeUpload:function(){this.$message.loading({content:this.$t("dataModel.opcuaModel.ImportNodeIDLoading"),duration:0})},copyFn:function(e){e=location.protocol+"//"+location.hostname+":"+location.port+e;var t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select();try{document.execCommand("copy")&&(document.body.removeChild(t),this.$message.success(this.$t("device.CopySuccess")))}catch(e){this.$message.error(this.$t("device.CopyFailed"))}},afterUpload:function(e){if("done"===e.file.status){var t=e.file.response;this.$message.destroy(),200==t.Code?(this.modelList[this.listIndex].DisplayImage=t.Path,this.$message.success(this.$t("component.systemImageModel.uploadSuccess"))):this.$message.error(this.$t("component.systemImageModel.uploadFailed"))}},doWhat:function(e){0==this.isEditStatus?this.addModel(e):this.editModel()},addModel:function(e){var t=this;e.preventDefault(),this.AddModelForm.validateFields((function(e){if(!e){var i={name:t.AddModelForm.getFieldValue("name"),description:t.AddModelForm.getFieldValue("description")},o=t;Object(a.g)(i).then((function(e){4002==e.data.code?(o.getModelList(),o.visible=!1,o.$message.success(o.$t("displayModel.AddModelSuccess"),3)):4001==e.data.code?o.$message.error(o.$t("displayModel.ModelExist"),3):4003==e.data.code?o.$message.error(o.$t("displayModel.AddModelFailed"),3):4005==e.data.code&&o.$message.error(o.$t("displayModel.AppOutCount"),3)}))}}))},showEditModel:function(e,t){this.visible=!0,this.isEditStatus=1,this.editIndex=t;var i=this;setTimeout((function(){i.AddModelForm.setFieldsValue({name:e.name,uuid:e.uuid,description:e.description})}),300)},editModel:function(){var e=this;this.AddModelForm.validateFields((function(t){if(!t){var i={uuid:e.AddModelForm.getFieldValue("uuid"),updateData:{name:e.AddModelForm.getFieldValue("name"),description:e.AddModelForm.getFieldValue("description")}},o=e;Object(a.i)(i).then((function(e){if(200==e.data.code){o.visible=!1;for(var t=0;t<o.modelList.length;t++)if(o.modelList[t].uuid==i.uuid){o.modelList[t].name=i.updateData.name,o.modelList[t].description=i.updateData.description;break}o.$message.success(o.$t("displayModel.EditModelSuccess"),3)}else 500==e.data.code&&o.$message.error(o.$t("displayModel.EditModelFailed"),3)}))}}))},delModel:function(e,t){var i=this;this.$confirm({title:i.$t("displayModel.DelModelConfirm"),okText:i.$t("displayModel.ConfirmOk"),onOk:function(){var t={displayUid:e};Object(a.h)(t).then((function(e){200==e.data.code?(i.getModelList(),i.$message.success(i.$t("displayModel.DelModelSuccess"),3)):2004==e.data.code?i.$message.error(i.$t("displayModel.modelHavedBind"),3):i.$message.error(i.$t("displayModel.DelModelFailed"),3)}))},cancelText:i.$t("displayModel.ConfirmCancel"),onCancel:function(){}})},handleCancel:function(e){this.visible=!1},getModelList:function(){this.modelList=[];var e=this;this.loading=!0,Object(a.j)({type:1}).then((function(t){if(null!=t.data.list)for(var i=0;i<t.data.list.length;i++){var a={};a.name=t.data.list[i].name,a.description=t.data.list[i].description,a.uuid=t.data.list[i].displayUid,""==t.data.list[i].DisplayImage?a.DisplayImage="":a.DisplayImage=t.data.list[i].DisplayImage,e.modelList.push(a),a={}}e.loading=!1}))}}},l=(i("96d4"),i("2877")),n=Object(l.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{padding:"10px"}},[i("a-card",{staticClass:"project-list",staticStyle:{padding:"0px","min-height":"400px"},attrs:{loading:e.loading,bordered:!1,title:e.$t("displayModel.DisplayList")}},[i("a",{attrs:{slot:"extra"},slot:"extra"},[i("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.visible=!0,e.isEditStatus=0}}},[e._v(" "+e._s(e.$t("displayModel.AddModel"))+" ")])],1),i("a-list",{attrs:{grid:{gutter:16,column:3},dataSource:e.modelList,pagination:e.pagination},scopedSlots:e._u([{key:"renderItem",fn:function(t,a){return i("a-list-item",{},[i("a-card",{staticStyle:{width:"300px","border-radius":"2px 2px 0 0"},attrs:{id:"displayCard",hoverable:""},scopedSlots:e._u([{key:"cover",fn:function(){return[i("vue-hover-mask",{scopedSlots:e._u([{key:"action",fn:function(){return[i("div",{staticStyle:{"margin-top":"20%"},on:{click:function(t){return e.updateImageIndex(a)}}},[i("a-upload",{attrs:{progress:"line",name:"file",multiple:!0,action:e.uploadDisPlayUrl+"/"+t.uuid,showUploadList:!1,beforeUpload:e.beforeUpload},on:{change:e.afterUpload}},[i("a-row",[i("span",{staticStyle:{display:"inline-block",height:"50px",width:"50px","border-radius":"50%","font-size":"25px","background-color":"#e5e5e5"}},[i("a-icon",{staticStyle:{color:"#b2b2b2","margin-top":"10px"},attrs:{type:"upload"}})],1)]),i("a-row",[i("span",{staticStyle:{color:"#fff","font-size":"15px"}},[e._v(e._s(e.$t("displayModel.UploadImage")))])])],1)],1)]},proxy:!0}],null,!0)},[i("img",{staticStyle:{width:"298px",height:"220px",cursor:"pointer"},attrs:{src:""==t.DisplayImage?"/static/images/pcDefaultCover.jpg":t.DisplayImage}})])]},proxy:!0},{key:"actions",fn:function(){return[i("router-link",{directives:[{name:"auth",rawName:"v-auth:role",value:"edit",expression:"`edit`",arg:"role"}],staticStyle:{"font-size":"16px"},attrs:{to:"/DisPlayEditor/"+t.uuid,target:"_blank"}},[i("a-icon",{attrs:{type:"form"}}),e._v(" "+e._s(e.$t("displayModel.ModelDesign")))],1),i("router-link",{staticStyle:{"font-size":"16px"},attrs:{to:"/AppRun/"+t.uuid,target:"_blank"}},[i("a-icon",{attrs:{type:"play-circle"}}),e._v(" "+e._s(e.$t("displayModel.modelRun")))],1),i("a-dropdown",{scopedSlots:e._u([{key:"overlay",fn:function(){return[i("a-menu",[i("a-menu-item",[i("a",{directives:[{name:"auth",rawName:"v-auth:role",value:"edit",expression:"`edit`",arg:"role"}],staticStyle:{color:"#565c64","font-size":"13px"},on:{click:function(i){return e.copyFn("/#/AppRun/"+t.uuid)}}},[i("a-icon",{attrs:{type:"share-alt"}}),e._v(" "+e._s(e.$t("displayModel.ModelShare")))],1)]),i("a-menu-item",[i("a",{directives:[{name:"auth",rawName:"v-auth:role",value:"edit",expression:"`edit`",arg:"role"}],staticStyle:{color:"#565c64","font-size":"13px"},on:{click:function(i){return e.showEditModel(t,a)}}},[i("a-icon",{attrs:{type:"edit"}}),e._v(" "+e._s(e.$t("displayModel.ModelEdit")))],1)]),i("a-menu-item",[i("a",{directives:[{name:"auth",rawName:"v-auth:role",value:"delete",expression:"`delete`",arg:"role"}],staticStyle:{color:"#565c64","font-size":"13px"},on:{click:function(i){return e.delModel(t.uuid,a)}}},[i("a-icon",{attrs:{type:"delete"}}),e._v(" "+e._s(e.$t("displayModel.ModelDelete")))],1)])],1)]},proxy:!0}],null,!0)},[i("a",{staticClass:"ant-dropdown-link",staticStyle:{"font-size":"16px"},on:{click:function(e){e.preventDefault()}}},[e._v(" "+e._s(e.$t("displayModel.More"))+" "),i("a-icon",{attrs:{type:"down"}})],1)])]},proxy:!0}],null,!0)},[i("a-card-meta",{attrs:{title:t.name,description:t.description}})],1)],1)}}])})],1),i("a-modal",{attrs:{title:e.$t("displayModel.AddModel")},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary"},on:{click:e.doWhat}},[e._v(" "+e._s(e.$t("displayModel.ModelSure"))+" ")]),i("a-button",{on:{click:e.handleCancel}},[e._v(" "+e._s(e.$t("displayModel.ModelCancel"))+" ")])],1),i("a-form",{attrs:{form:e.AddModelForm,"label-col":{span:3},"wrapper-col":{span:18}}},[i("a-form-item",{attrs:{label:e.$t("displayModel.ModelName")}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$t("displayModel.ModelName")}]}],expression:"['name', { rules: [{ required: true, message: $t('displayModel.ModelName') }] }]"}]})],1),i("a-form-item",{attrs:{label:e.$t("displayModel.ModelDescription")}},[i("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!0,message:e.$t("displayModel.ModelDescription")}]}],expression:"['description', { rules: [{ required: true, message: $t('displayModel.ModelDescription') }] }]"}]})],1),i("a-form-item",{staticStyle:{display:"none"},attrs:{label:e.$t("displayModel.ModelDescription")}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["uuid",{rules:[{required:!1}]}],expression:"['uuid', { rules: [{ required: false }] }]"}]})],1)],1)],2),i("a-modal",{attrs:{title:e.$t("displayModel.AuthManage")},model:{value:e.addAuthVisible,callback:function(t){e.addAuthVisible=t},expression:"addAuthVisible"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary"},on:{click:e.doWhat}},[e._v(" "+e._s(e.$t("displayModel.ModelSure"))+" ")]),i("a-button",{on:{click:function(t){e.addAuthVisible=!1}}},[e._v(" "+e._s(e.$t("displayModel.ModelCancel"))+" ")])],1)],2)],1)}),[],!1,null,"2119c774",null);t.default=n.exports},c2f7:function(e,t,i){"use strict";var a={name:"VueHoverMask",methods:{handleClick:function(){this.$emit("click")}}},o=(i("0579"),i("2877")),d=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vue-hover-mask"},[e._t("default"),i("span",{staticClass:"vue-hover-mask_action",on:{click:e.handleClick}},[e._t("action")],2)],2)}),[],!1,null,null,null);t.a=d.exports}}]);