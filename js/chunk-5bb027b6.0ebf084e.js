(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5bb027b6"],{"600d":function(e,t,r){"use strict";r.d(t,"g",(function(){return o})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return l})),r.d(t,"f",(function(){return p})),r.d(t,"e",(function(){return f})),r.d(t,"h",(function(){return v})),r.d(t,"i",(function(){return g})),r.d(t,"j",(function(){return T})),r.d(t,"k",(function(){return S})),r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return w}));var n=r("c964"),a=(r("96cf"),r("7424")),i=r("b775");function o(){return c.apply(this,arguments)}function c(){return(c=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.MONITORTREE,i.b.POST));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return u.apply(this,arguments)}function u(){return(u=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.MONITORADD,i.b.POST,t,{timeout:12e6}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return(d=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.PINGICMP,i.b.POST,t,{timeout:12e6}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.MONITOREDIT,i.b.POST,t,{timeout:12e6}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return b.apply(this,arguments)}function b(){return(b=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.MONITORDEL,i.b.POST,t,{timeout:12e6}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.MONITORREALDATA,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.MONITORREALDATABYUUID,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.SUPPORTDEVICELIST,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return O.apply(this,arguments)}function O(){return(O=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.SETDATA,i.b.POST,t,{timeout:1e4}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return D.apply(this,arguments)}function D(){return(D=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.GETDEVICEMODELDATALIST,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return E.apply(this,arguments)}function E(){return(E=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.SETDEVICESTARTORSTOP,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"8f42":function(e,t,r){"use strict";r.r(t);r("d3b7"),r("e9c4");var n=r("cf45"),a=r("daf8"),i=r("f64d"),o=r("600d"),c={name:"diyDataHistoryTemplete",i18n:r("89fe"),components:{Mtextarea:a.a},data:function(){return{messageShowLoad:!1,pagination:{pageSize:15,showSizeChanger:!0},textAreValue:"",editVisible:!1,addVisible:!1,SelectAlarmData:7,SelectPeriod:3,IsExport:!1,TimeGeList:[{value:1,name:"diyReport.TimeGeOneMin"},{value:2,name:"diyReport.TimeGeFiveMin"},{value:3,name:"diyReport.TimeGeTenMin"},{value:4,name:"diyReport.TimeGeTenFiveMin"},{value:5,name:"diyReport.TimeGeTenThreeMin"},{value:6,name:"diyReport.TimeGeTenOneHour"},{value:7,name:"diyReport.TimeGeTenOneDay"}],Period:[{value:1,name:"diyReportTemplete.PeriodList.oneDay"},{value:2,name:"diyReportTemplete.PeriodList.threeDay"},{value:3,name:"diyReportTemplete.PeriodList.sevenDay"},{value:4,name:"diyReportTemplete.PeriodList.fivethDay"},{value:5,name:"diyReportTemplete.PeriodList.onemonth"}],AddForm:this.$form.createForm(this),EditForm:this.$form.createForm(this),columns:[{slotName:"diyReportTemplete.Name",width:"15%",scopedSlots:{customRender:"Name",title:"diyReportTemplete.Name"},dataIndex:"Name"},{width:"20%",slotName:"diyReportTemplete.Describe",scopedSlots:{customRender:"Describe",title:"diyReportTemplete.Describe"},dataIndex:"Describe"},{slotName:"configComponent.video.TableVideoOpt",width:"20%",scopedSlots:{customRender:"Opt",title:"configComponent.video.TableVideoOpt"}}],dataSource:[],SelectDevice:[],deviceTreeData:[]}},authorize:{},mounted:function(){this.getMonitorTree(),this.GetReportTempletes()},activated:function(){},filters:{formatDate:function(e){var t=new Date(e);return Object(n.a)(t,"yyyy-MM-dd hh:mm:ss")}},created:function(){},watch:{},methods:{getMonitorTree:function(){var e=this;this.deviceTreeData=[],Object(o.g)().then((function(t){0==t.data.code&&(e.deviceTreeData=t.data.list)}))},HandExport:function(e){var t=this,r={uuid:e.Uuid};t.$message.loading({content:t.$t("diyReportTemplete.ExportLoading"),duration:0}),t.IsExport=!0,Object(i.e)(r).then((function(r){if(0==r.data.code){t.$message.destroy();var n=document.createElement("a");n.href=r.data.path,n.setAttribute("download",e.Name+".zip"),n.style.display="none",document.body.appendChild(n),setTimeout((function(){n.click(),document.body.removeChild(n)}),66)}else t.IsExport=!1,t.$message.destroy(),t.$message.error(t.$t("diyReportTemplete.HandExportFailed"))})).finally((function(e){t.IsExport=!1}))},AddTemplateAction:function(){var e=this,t=this;this.AddForm.validateFields((function(r){if(!r){var n={Name:e.AddForm.getFieldValue("Name"),DeviceUuids:JSON.stringify(e.SelectDevice),TimeGe:e.SelectAlarmData,Period:e.SelectPeriod,Describe:e.textAreValue};Object(i.a)(n).then((function(e){0==e.data.code?(t.GetReportTempletes(),t.addVisible=!1):t.$message.success(t.$t("alarm.trigger.AddFailed"))}))}}))},EditTempleteAction:function(){var e=this,t=this;this.EditForm.validateFields((function(r){if(!r){var n={uuid:t.editUuid,data:{Name:e.AddForm.getFieldValue("Name"),DeviceUuids:JSON.stringify(e.SelectDevice),TimeGe:e.SelectAlarmData,Period:e.SelectPeriod,Describe:e.textAreValue}};Object(i.c)(n).then((function(e){0==e.data.code?(t.GetReportTempletes(),t.$message.success(t.$t("alarm.trigger.EditSuccess")),t.editVisible=!1):t.$message.success(t.$t("VideoManager.EditFailed"))}))}}))},goToEdit:function(e){this.editUuid=e.Uuid,this.textAreValue=e.Describe,0==e.TimeGe?this.SelectAlarmData=7:this.SelectAlarmData=e.TimeGe,0==e.Period?this.SelectPeriod=3:this.SelectPeriod=e.Period;try{this.SelectDevice=JSON.parse(e.DeviceUuids)}catch(e){this.SelectDevice=[]}var t=this;this.editVisible=!0,this.$message.loading(this.$t("monitor.loading"),.5),setTimeout((function(){t.EditForm.setFieldsValue({Name:e.Name,Describe:e.Describe})}),200)},DelTemplateAction:function(e){var t=this,r={Uuid:e};Object(i.b)(r).then((function(e){0==e.data.code?(t.GetReportTempletes(),t.$message.success(t.$t("component.systemImageModel.delImageSuccess")),t.addVisible=!1):t.$message.error(t.$t("component.systemImageModel.delImageFailed"))}))},GetReportTempletes:function(){var e=this;e.loading=!0,this.dataSource=[],Object(i.d)().then((function(t){e.loading=!1,0==t.data.code&&(null==t.data.list?e.dataSource=[]:e.dataSource=t.data.list)})).finally((function(t){e.loading=!1}))}}},s=(r("db0b"),r("2877")),u=Object(s.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",[r("a-button",{attrs:{type:"primary"},on:{click:function(t){e.addVisible=!0,e.textAreValue="",e.SelectDevice=[],e.SelectAlarmData=7,e.SelectPeriod=3}}},[e._v(" "+e._s(e.$t("configComponent.video.AddVideo"))+" ")]),r("a-divider",{attrs:{type:"vertical"}}),r("a-button",{attrs:{disabled:e.messageShowLoad,type:"default"},on:{click:function(t){return e.GetReportTempletes()}}},[e._v(" "+e._s(e.$t("configComponent.video.VideoRefresh"))+" ")]),r("div",{staticStyle:{"margin-top":"5px"}},[r("a-table",{attrs:{rowKey:"Name",pagination:e.pagination,columns:e.columns,"data-source":e.dataSource},scopedSlots:e._u([{key:"Status",fn:function(t){return r("span",{},[1==t?r("div",{staticStyle:{color:"#74f808"}},[e._v(" "+e._s(e.$t("configComponent.video.VideoOnline"))+" ")]):0==t?r("div",{staticStyle:{color:"#ea1111"}},[e._v(" "+e._s(e.$t("configComponent.video.VideoOffline"))+" ")]):e._e()])}},{key:"Opt",fn:function(t,n){return r("div",{},[r("a-button",{staticStyle:{"margin-right":"2px",padding:"0",cursor:"pointer",color:"#13C2C2"},attrs:{type:"link",disabled:e.IsExport},on:{click:function(t){return e.goToEdit(n)}}},[r("a-icon",{attrs:{type:"edit"}}),r("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("monitor.nodeEdit")))])],1),e._v(" | "),r("a-button",{staticStyle:{"margin-right":"2px",padding:"0",cursor:"pointer",color:"#13C2C2"},attrs:{type:"link",disabled:e.IsExport},on:{click:function(t){return e.HandExport(n)}}},[r("a-icon",{attrs:{type:"export"}}),r("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("diyReportTemplete.HandExport")))])],1),e._v(" | "),r("router-link",{staticStyle:{color:"darkorange"},attrs:{disabled:e.IsExport,to:"/Reporting/ReportTempleteContent/"+n.Uuid}},[r("a-icon",{attrs:{type:"file-excel"}}),e._v(e._s(e.$t("diyReportTemplete.TempleteContent")))],1),e._v(" | "),r("a-popconfirm",{attrs:{disabled:e.IsExport,title:e.$t("configComponent.video.DelVideoConfirm"),"ok-text":e.$t("component.systemImageModel.delImageYes"),"cancel-text":e.$t("component.systemImageModel.delImageNo")},on:{confirm:function(t){return e.DelTemplateAction(n.Uuid)}}},[r("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),r("a-icon",{attrs:{type:"delete",theme:"twoTone","two-tone-color":"#eb2f96"}}),r("a",{staticStyle:{color:"#eb2f96"}},[e._v(e._s(e.$t("configComponent.video.DelVideo")))])],1)],1)}}])},[e._l(e.columns,(function(t,n){return r("template",{slot:t.slotName},[r("span",{key:n},[e._v(e._s(e.$t(t.slotName)))])])}))],2)],1),r("a-modal",{attrs:{title:e.$t("configComponent.video.AddVideo")},on:{ok:e.AddTemplateAction},model:{value:e.addVisible,callback:function(t){e.addVisible=t},expression:"addVisible"}},[r("a-form",{attrs:{form:e.AddForm,"label-col":{span:4},"wrapper-col":{span:19}}},[r("a-form-item",{attrs:{label:e.$t("diyReportTemplete.Name")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Name",{rules:[{required:!0}]}],expression:"[\n              'Name',\n              { rules: [{ required: true}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("reporting.AlarmHistory.DeviceList")}},[r("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","tree-node-filter-prop":"title","tree-checkable":"","allow-clear":"","dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.deviceTreeData,"replace-fields":{value:"key",title:"text"},placeholder:e.$t("reporting.AlarmHistory.DeviceList"),"tree-default-expand-all":""},model:{value:e.SelectDevice,callback:function(t){e.SelectDevice=t},expression:"SelectDevice"}})],1),r("a-form-item",{attrs:{label:e.$t("diyReport.TimeGe")}},[r("a-select",{staticStyle:{width:"100%"},model:{value:e.SelectAlarmData,callback:function(t){e.SelectAlarmData=t},expression:"SelectAlarmData"}},e._l(e.TimeGeList,(function(t,n){return r("a-select-option",{key:n,attrs:{value:t.value}},[e._v(" "+e._s(e.$t(t.name))+" ")])})),1)],1),r("a-form-item",{attrs:{label:e.$t("diyReportTemplete.Period")}},[r("a-select",{staticStyle:{width:"100%"},model:{value:e.SelectPeriod,callback:function(t){e.SelectPeriod=t},expression:"SelectPeriod"}},e._l(e.Period,(function(t,n){return r("a-select-option",{key:n,attrs:{value:t.value}},[e._v(" "+e._s(e.$t(t.name))+" ")])})),1)],1),r("a-form-item",{attrs:{label:e.$t("diyReportTemplete.Describe")}},[r("Mtextarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Describe",{rules:[{required:!0,message:e.$t("diyReportTemplete.Describe")}]}],expression:"['Describe', { rules: [{ required: true, message: $t('diyReportTemplete.Describe') }] }]"}],attrs:{rows:"4",showWordLimit:!0,maxLength:100,autoSize:!1},model:{value:e.textAreValue,callback:function(t){e.textAreValue=t},expression:"textAreValue"}})],1)],1)],1),r("a-modal",{attrs:{title:e.$t("configComponent.video.AddVideo")},on:{ok:e.EditTempleteAction},model:{value:e.editVisible,callback:function(t){e.editVisible=t},expression:"editVisible"}},[r("a-form",{attrs:{form:e.EditForm,"label-col":{span:4},"wrapper-col":{span:19}}},[r("a-form-item",{attrs:{label:e.$t("diyReportTemplete.Name")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Name",{rules:[{required:!0}]}],expression:"[\n              'Name',\n              { rules: [{ required: true}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("reporting.AlarmHistory.DeviceList")}},[r("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","tree-node-filter-prop":"title","tree-checkable":"","allow-clear":"","dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.deviceTreeData,"replace-fields":{value:"key",title:"text"},placeholder:e.$t("reporting.AlarmHistory.DeviceList"),"tree-default-expand-all":""},model:{value:e.SelectDevice,callback:function(t){e.SelectDevice=t},expression:"SelectDevice"}})],1),r("a-form-item",{attrs:{label:e.$t("diyReport.TimeGe")}},[r("a-select",{staticStyle:{width:"100%"},model:{value:e.SelectAlarmData,callback:function(t){e.SelectAlarmData=t},expression:"SelectAlarmData"}},e._l(e.TimeGeList,(function(t,n){return r("a-select-option",{key:n,attrs:{value:t.value}},[e._v(" "+e._s(e.$t(t.name))+" ")])})),1)],1),r("a-form-item",{attrs:{label:e.$t("diyReportTemplete.Period")}},[r("a-select",{staticStyle:{width:"100%"},model:{value:e.SelectPeriod,callback:function(t){e.SelectPeriod=t},expression:"SelectPeriod"}},e._l(e.Period,(function(t,n){return r("a-select-option",{key:n,attrs:{value:t.value}},[e._v(" "+e._s(e.$t(t.name))+" ")])})),1)],1),r("a-form-item",{attrs:{label:e.$t("diyReportTemplete.Describe")}},[r("Mtextarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["Describe",{rules:[{required:!0,message:e.$t("diyReportTemplete.Describe")}]}],expression:"['Describe', { rules: [{ required: true, message: $t('diyReportTemplete.Describe') }] }]"}],attrs:{rows:"4",showWordLimit:!0,maxLength:100,autoSize:!1},model:{value:e.textAreValue,callback:function(t){e.textAreValue=t},expression:"textAreValue"}})],1)],1)],1)],1)}),[],!1,null,null,null);t.default=u.exports},"95c5":function(e,t,r){"use strict";r("aefa")},aefa:function(e,t,r){},b409:function(e,t,r){},daf8:function(e,t,r){"use strict";var n={props:{showWordLimit:{type:Boolean,default:!1}},model:{prop:"value",event:"change"},computed:{textLength:function(){return(this.$attrs.value||"").length}},methods:{onChange:function(e){this.$emit("change",e.target.value)}}},a=(r("95c5"),r("2877")),i=Object(a.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"textarea-wrapper"},[r("a-textarea",e._b({staticClass:"m-textarea",on:{change:e.onChange},model:{value:e.$attrs.value,callback:function(t){e.$set(e.$attrs,"value",t)},expression:"$attrs.value"}},"a-textarea",e.$attrs,!1)),e.showWordLimit?r("span",{staticClass:"m-count"},[e._v(e._s(e.textLength)+"/"),e.$attrs.maxLength?[e._v(e._s(e.$attrs.maxLength))]:e._e()],2):e._e()],1)}),[],!1,null,"b9c09c60",null);t.a=i.exports},db0b:function(e,t,r){"use strict";r("b409")},f64d:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return p})),r.d(t,"f",(function(){return f})),r.d(t,"e",(function(){return v}));var n=r("c964"),a=(r("96cf"),r("7424")),i=r("b775");function o(e){return c.apply(this,arguments)}function c(){return(c=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.GETREPORTTEMPLETE,i.b.POST,t,{timeout:6e8}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return u.apply(this,arguments)}function u(){return(u=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.ADDREPORTTEMPLETE,i.b.POST,t,{timeout:6e8}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return(d=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.DelREPORTTEMPLETE,i.b.POST,t,{timeout:6e8}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.EDITREPORTTEMPLETE,i.b.POST,t,{timeout:6e8}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return b.apply(this,arguments)}function b(){return(b=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.SAVEREPORTTEMPLETE,i.b.POST,t,{timeout:6e8}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(a.HANDEXPORT,i.b.POST,t,{timeout:6e8}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);