(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-22624e14"],{
/***/2403:
/***/function(e,t,o){"use strict";
/* harmony import */o("4cad");
/* harmony import */},
/***/"2a48":
/***/function(e,t,o){"use strict";
/* unused harmony export videoCodec */
/* unused harmony export videoRecviver */
/* harmony export (binding) */o.d(t,"k",(function(){return s})),
/* harmony export (binding) */o.d(t,"f",(function(){return d})),
/* harmony export (binding) */o.d(t,"g",(function(){return l})),
/* harmony export (binding) */o.d(t,"e",(function(){return m})),
/* harmony export (binding) */o.d(t,"i",(function(){return b})),
/* harmony export (binding) */o.d(t,"h",(function(){return g})),
/* harmony export (binding) */o.d(t,"j",(function(){return S})),
/* harmony export (binding) */o.d(t,"d",(function(){return V})),
/* harmony export (binding) */o.d(t,"c",(function(){return w})),
/* harmony export (binding) */o.d(t,"b",(function(){return C})),
/* harmony export (binding) */o.d(t,"a",(function(){return j}));
/* harmony import */var n=o("c7eb"),a=o("1da1"),i=o("7424"),r=o("b775");
/* harmony import */function s(e){return c.apply(this,arguments)}function c(){return(c=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.VIDEOLIST,r.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return u.apply(this,arguments)}function u(){return(u=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.HISTORYVIDEOLIST,r.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return(p=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.SNAPHISTORYIMAGESLIST,r.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.HISTORYIMAGESLIST,r.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return v.apply(this,arguments)}function v(){return(v=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.VIDEODEL,r.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return h.apply(this,arguments)}function h(){return(h=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.VIDEOADD,r.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return O.apply(this,arguments)}function O(){return(O=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.VIDEOEDIT,r.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return y.apply(this,arguments)}function y(){return(y=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.GETVIDEOSTATUS,r.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return T.apply(this,arguments)}function T(){return(T=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.SETVIDEOSTOPORSTART,r.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return k.apply(this,arguments)}function k(){return(k=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.PTZCONTROL,r.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return I.apply(this,arguments)}function I(){return(I=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.GETMONIBUCA,r.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/* unused harmony default export */},
/***/"4cad":
/***/function(e,t,o){
// extracted by mini-css-extract-plugin
/***/},
/***/a8d0:
/***/function(e,t,o){"use strict";
/* harmony export (binding) */o.d(t,"b",(function(){return s})),
/* harmony export (binding) */o.d(t,"a",(function(){return d}));
/* harmony import */var n=o("c7eb"),a=o("1da1"),i=o("7424"),r=o("b775");
/* harmony import */
/**
 * snmp模型列表
 */
function s(){return c.apply(this,arguments)}
/**
 * snmp模型删除
 */function c(){return(c=Object(a.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.SYSTEMIMAGELIST,r.b.POST));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return u.apply(this,arguments)}function u(){return(u=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(r.g)(i.SYSTEMIMAGEDEL,r.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/* unused harmony default export */},
/***/dc3d:
/***/function(e,t,o){"use strict";
// EXTERNAL MODULE: ./node_modules/core-js/modules/es.function.name.js
o("b0c0"),o("14d9"),o("b64b");
// CONCATENATED MODULE: ./node_modules/cache-loader/dist/cjs.js?{"cacheDirectory":"node_modules/.cache/vue-loader","cacheIdentifier":"3d1bfd38-vue-loader-template"}!./node_modules/cache-loader/dist/cjs.js??ref--13-0!./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--6!./node_modules/cache-loader/dist/cjs.js??ref--1-0!./node_modules/vue-loader/lib??vue-loader-options!./src/components/systemVideoModel/systemVideoModel.vue?vue&type=template&id=6fa671e2&scoped=true
var n=o("2a48"),a=o("c1df"),i=o.n(a),r=o("a8d0"),s=o("7424"),c={name:"SystemVideoModel",i18n:o("89fe"),data:function(){return{videoServer:"",isMobile:!1,AddForm:this.$form.createForm(this),radioValue:1,GBVideoList:[],MonibucaServer:"",visible:!1,addVisible:!1,messageShowLoad:!1,VideoServer:location.host,uploadUrl:s.SYSTEMIMAGEUPLOAD,videoList:[],GBColumns:[{width:"5%",slotName:"configComponent.video.TableVideoIndex",scopedSlots:{customRender:"TableVideoIndex",title:"configComponent.video.TableVideoIndex"},dataIndex:"TableVideoIndex"},{width:"10%",slotName:"configComponent.video.TableVideoName",scopedSlots:{customRender:"Name",title:"configComponent.video.TableVideoName"},dataIndex:"Name"},{slotName:"configComponent.video.Manufacturer",width:"10%",scopedSlots:{customRender:"Manufacturer",title:"configComponent.video.Manufacturer"},dataIndex:"Manufacturer"},{slotName:"configComponent.video.Model",width:"15%",scopedSlots:{customRender:"Model",title:"configComponent.video.Model"},dataIndex:"Model"},{slotName:"configComponent.video.RegisterTime",width:"10%",scopedSlots:{customRender:"RegisterTime",title:"configComponent.video.RegisterTime"},dataIndex:"RegisterTime"},{slotName:"configComponent.video.UpdateTime",width:"10%",scopedSlots:{customRender:"UpdateTime",title:"configComponent.video.UpdateTime"},dataIndex:"UpdateTime"},{slotName:"configComponent.video.TableVideoOpt",width:"5%",scopedSlots:{customRender:"Opt",title:"configComponent.video.TableVideoOpt"}}],columns:[{width:"10%",slotName:"configComponent.video.TableVideoName",scopedSlots:{customRender:"Name",title:"configComponent.video.TableVideoName"},dataIndex:"Name"},{slotName:"configComponent.video.TableVideoIP",width:"10%",scopedSlots:{customRender:"IP",title:"configComponent.video.TableVideoIP"},dataIndex:"ip"},{slotName:"configComponent.video.TableVideoStatus",width:"5%",scopedSlots:{customRender:"Status",title:"configComponent.video.TableVideoStatus"},dataIndex:"status"},{slotName:"configComponent.video.TableVideoOpt",width:"10%",scopedSlots:{customRender:"Opt",title:"configComponent.video.TableVideoOpt"}}],columnsPhone:[{width:"15%",slotName:"configComponent.video.TableVideoName",scopedSlots:{customRender:"Name",title:"configComponent.video.TableVideoName"},dataIndex:"Name"},{slotName:"configComponent.video.TableVideoOpt",width:"10%",scopedSlots:{customRender:"Opt",title:"configComponent.video.TableVideoOpt"}}],GBColumnsPhone:[{width:"10%",slotName:"configComponent.video.TableVideoName",scopedSlots:{customRender:"Name",title:"configComponent.video.TableVideoName"},dataIndex:"Name"},{slotName:"configComponent.video.TableVideoOpt",width:"5%",scopedSlots:{customRender:"Opt",title:"configComponent.video.TableVideoOpt"}}],pagination:{pageSize:15,showSizeChanger:!0},LocalVideoList:[],paginationPhone:{pageSize:5,showSizeChanger:!0}}},props:{networkVideo:{type:Object,required:!0}},mounted:function(){this.getSystemVideoList()},computed:{},methods:{formatDateTime:function(e){var t=new Date(e),o=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var a=t.getDate();a=a<10?"0"+a:a;var i=t.getHours();i=i<10?"0"+i:i;var r=t.getMinutes();r=r<10?"0"+r:r;var s=t.getSeconds();return o+"-"+n+"-"+a+" "+i+":"+r+":"+(s=s<10?"0"+s:s)},onChangeGroup:function(e){1==e.target.value?this.getSystemVideoList():3==e.target.value?this.getGB28281VideoList():4==e.target.value&&this.getSystemLocalVideoList()},AddVideoAction:function(){var e=this,t=this;this.AddForm.validateFields((function(o){if(!o){var a={name:e.AddForm.getFieldValue("name"),ip:e.AddForm.getFieldValue("ip"),port:parseInt(e.AddForm.getFieldValue("port")),user:e.AddForm.getFieldValue("user"),password:e.AddForm.getFieldValue("password"),url:e.AddForm.getFieldValue("RtspUrl")};Object(n.h)(a).then((function(e){0==e.data.code?(t.getSystemVideoList(),t.addVisible=!1):t.$message.success(t.$t("alarm.trigger.AddFailed"))}))}}))},getSystemVideoList:function(){var e=this;e.videoList=[],e.messageShowLoad=!0,Object(n.k)().then((function(t){if(null!=t.data.list)for(var o={},n=0;n<t.data.list.length;n++)o.key=t.data.list[n].Uuid,o.ip=t.data.list[n].Ip,o.Name=t.data.list[n].Name,o.port=t.data.list[n].Port,o.password=t.data.list[n].Password,o.user=t.data.list[n].User,o.status=t.data.list[n].Status,o.uuid=t.data.list[n].Uuid,e.videoList.push(o),o={};e.messageShowLoad=!1}))},getGB28281VideoList:function(){var e=this;e.messageShowLoad=!0,e.GBVideoList=[],Object(n.a)().then((function(t){if(0==t.data.code){e.MonibucaServer=t.data.MonibucaServer;for(var o=JSON.parse(t.data.data),n=0,a=0;a<o.length;a++)for(var r=0;r<o[a].Channels.length;r++){var s={};s.Manufacturer=o[a].Manufacturer,s.RegisterTime=i()(o[a].RegisterTime).format("yyyy-MM-DD HH:mm:ss"),s.UpdateTime=i()(o[a].UpdateTime).format("yyyy-MM-DD HH:mm:ss"),s.TableVideoIndex=n,s.Name=""==o[a].Channels[r].Name?o[a].Name:o[a].Channels[r].Name,s.Model=o[a].Channels[r].Model,s.Status=o[a].Channels[r].Status,s.LiveSubSP=o[a].ID+"/"+o[a].Channels[r].DeviceID,n++,e.GBVideoList.push(s),s={}}}e.messageShowLoad=!1})).catch((function(t){e.messageShowLoad=!1}))},getSystemLocalVideoList:function(){var e=this;e.LocalVideoList=[],Object(r.b)().then((function(t){if(null!=t.data.list){e.imageList=[],e.model3DList=[];for(var o=0;o<t.data.list.length;o++){var n={};n.imgurl=t.data.list[o].path,n.name=t.data.list[o].name,n.startAt=e.formatDateTime(t.data.list[o].UpdatedAt),4==t.data.list[o].type&&e.LocalVideoList.push(n),n={}}}}))},showModal:function(){this.visible=!0},selectVideo:function(e,t,o){var n="";n=1==e?"webrtc://"+this.videoServer+"/webrtcstream/"+t:3==e?this.MonibucaServer+"hdl/"+t+".flv":t,this.$emit("onSelectVideo",{type:e,key:t,url:n,name:o}),this.visible=!1},delVideo:function(e){var t=this,o={uuid:e};Object(n.i)(o).then((function(e){0==e.data.code?(t.getSystemVideoList(),t.$message.success(t.$t("component.systemImageModel.delImageSuccess"))):t.$message.error(t.$t("component.systemImageModel.delImageFailed"))}))},handleCancel:function(){this.visible=!1},afterUpload:function(e){"done"===e.file.status&&(2002==e.file.response.Code?(this.getSystemLocalVideoList(),this.$message.success(this.$t("component.systemImageModel.uploadSuccess"))):this.$message.error(this.$t("component.systemImageModel.uploadFailed")))}},created:function(){var e=this;this.$EventBus.$on("cell-vuex",(function(t){e.videoServer=t.PStore.state.setting.videoServer,e.isMobile=t.PStore.state.setting.isMobile}))}},d=(o("2403"),o("2877")),u=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{directives:[{name:"drag-modal",rawName:"v-drag-modal"}],attrs:{footer:null,width:e.isMobile?"300px":"1000px",title:e.$t("configComponent.video.ModelTitle"),"on-ok":"handleOk"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("div",{staticStyle:{padding:"10px"}},[e.isMobile?e._e():t("div",[t("a-radio-group",{on:{change:e.onChangeGroup},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[t("a-radio",{attrs:{value:1}},[e._v(" "+e._s(e.$t("configComponent.video.CamVideo"))+" ")]),t("a-radio",{attrs:{value:3}},[e._v(" "+e._s(e.$t("configComponent.video.NetworkGB28281Video"))+" ")]),t("a-radio",{attrs:{value:2}},[e._v(" "+e._s(e.$t("configComponent.video.NetworkVideo"))+" ")]),t("a-radio",{attrs:{value:4}},[e._v(" "+e._s(e.$t("configComponent.video.LocalVideo"))+" ")])],1),t("a-divider",{attrs:{dashed:""}})],1),1==e.radioValue?t("div",[e.isMobile?e._e():t("a-button",{attrs:{disabled:e.messageShowLoad,type:"default"},on:{click:function(t){return e.getSystemVideoList()}}},[e._v(" "+e._s(e.$t("configComponent.video.VideoRefresh"))+" ")]),t("div",[t("a-table",{attrs:{rowKey:"Name",pagination:e.isMobile?e.paginationPhone:e.pagination,columns:e.isMobile?e.columnsPhone:e.columns,"data-source":e.videoList},scopedSlots:e._u([{key:"Status",fn:function(o){return t("span",{},[1==o?t("div",{staticStyle:{color:"#74f808"}},[e._v(" "+e._s(e.$t("configComponent.video.VideoOnline"))+" ")]):0==o?t("div",{staticStyle:{color:"#ea1111"}},[e._v(" "+e._s(e.$t("configComponent.video.VideoOffline"))+" ")]):e._e()])}},{key:"Opt",fn:function(o,n){return t("div",{},[t("a",{staticStyle:{cursor:"pointer",color:"#13C2C2"},attrs:{type:"link"},on:{click:function(t){return e.selectVideo(1,n.key,n.Name)}}},[t("a-icon",{attrs:{type:"check"}}),t("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("configComponent.video.SelectVideo")))])],1)])}}],null,!1,3789411201)},[e._l(e.columns,(function(o,n){return t("template",{slot:o.slotName},[t("span",{key:n},[e._v(e._s(e.$t(o.slotName)))])])}))],2)],1)],1):e._e(),3==e.radioValue?t("div",[e.isMobile?e._e():t("a-button",{attrs:{disabled:e.messageShowLoad,type:"default"},on:{click:function(t){return e.getGB28281VideoList()}}},[e._v(" "+e._s(e.$t("configComponent.video.VideoRefresh"))+" ")]),t("div",[t("a-table",{attrs:{rowKey:"TableVideoIndex",pagination:e.isMobile?e.paginationPhone:e.pagination,columns:e.isMobile?e.GBColumnsPhone:e.GBColumns,"data-source":e.GBVideoList},scopedSlots:e._u([{key:"Opt",fn:function(o,n){return t("div",{},[t("a",{staticStyle:{cursor:"pointer",color:"#13C2C2"},attrs:{type:"link"},on:{click:function(t){return e.selectVideo(3,n.LiveSubSP,n.Name)}}},[t("a-icon",{attrs:{type:"check"}}),t("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("configComponent.video.SelectVideo")))])],1)])}}],null,!1,4088494279)},[e._l(e.GBColumns,(function(o,n){return e.isMobile?e._l(e.GBColumnsPhone,(function(o,n){return t("template",{slot:o.slotName},[t("span",{key:n},[e._v(e._s(e.$t(o.slotName)))])])})):t("template",{slot:o.slotName},[t("span",{key:n},[e._v(e._s(e.$t(o.slotName)))])])}))],2)],1)],1):e._e(),2!=e.radioValue||e.isMobile?e._e():t("div",[t("a-form",{attrs:{"label-col":{span:3},"wrapper-col":{span:20}}},[t("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoName")}},[t("a-input",{attrs:{"default-value":e.networkVideo.name},model:{value:e.networkVideo.name,callback:function(t){e.$set(e.networkVideo,"name",t)},expression:"networkVideo.name"}})],1),t("a-form-item",{attrs:{label:e.$t("configComponent.video.NetworkVideoUrl")}},[t("a-input",{attrs:{"default-value":e.networkVideo.url},model:{value:e.networkVideo.url,callback:function(t){e.$set(e.networkVideo,"url",t)},expression:"networkVideo.url"}})],1),t("a-form-item",[t("div",{staticStyle:{"margin-top":"5px","margin-left":"120px"}},[t("a-button",{key:"submit",attrs:{type:"primary"},on:{click:function(t){return e.selectVideo(0,e.networkVideo.url,e.networkVideo.name)}}},[e._v(e._s(e.$t("component.systemImageModel.networkImageBtn")))])],1)])],1)],1),4==e.radioValue?t("div",[t("div",{staticStyle:{padding:"10px",height:"auto"}},[t("div",{staticStyle:{"margin-bottom":"5px"}},[t("a-upload",{attrs:{name:"file",multiple:!0,action:e.uploadUrl,showUploadList:!1},on:{change:e.afterUpload}},[t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v(" "+e._s(e.$t("displayConfig.Properties.upload"))+" ")],1)],1)],1),t("div",[t("div",[t("a-list",{attrs:{size:"small",pagination:e.pagination,"data-source":e.LocalVideoList},scopedSlots:e._u([{key:"renderItem",fn:function(o,n){return t("a-list-item",{key:n},[t("a",{attrs:{slot:"actions"},on:{click:function(t){return e.selectVideo(4,o.imgurl,o.imgurl)}},slot:"actions"},[e._v(e._s(e.$t("component.systemImageModel.selectImage")))]),t("a-list-item-meta",[t("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(o.name))])])],1)}}],null,!1,2415679132)})],1)])])]):e._e()])])],1)}),[],!1,null,"6fa671e2",null)
/* harmony default export */;t.a=u.exports}}]);