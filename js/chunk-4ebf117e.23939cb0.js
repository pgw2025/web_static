(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4ebf117e"],{"2a48":function(e,t,r){"use strict";r.d(t,"k",(function(){return a})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return u})),r.d(t,"e",(function(){return p})),r.d(t,"i",(function(){return f})),r.d(t,"h",(function(){return g})),r.d(t,"j",(function(){return h})),r.d(t,"d",(function(){return w})),r.d(t,"c",(function(){return I})),r.d(t,"b",(function(){return y})),r.d(t,"a",(function(){return T}));var o=r("c964"),n=(r("96cf"),r("7424")),i=r("b775");function a(e){return s.apply(this,arguments)}function s(){return(s=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(n.VIDEOLIST,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return c.apply(this,arguments)}function c(){return(c=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(n.HISTORYVIDEOLIST,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(n.SNAPHISTORYIMAGESLIST,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(n.HISTORYIMAGESLIST,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(n.VIDEODEL,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(n.VIDEOADD,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return V.apply(this,arguments)}function V(){return(V=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(n.VIDEOEDIT,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return R.apply(this,arguments)}function R(){return(R=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(n.GETVIDEOSTATUS,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return S.apply(this,arguments)}function S(){return(S=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(n.SETVIDEOSTOPORSTART,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(n.PTZCONTROL,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return $.apply(this,arguments)}function $(){return($=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.g)(n.GETMONIBUCA,i.b.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"3c1d":function(e,t,r){},"91b8":function(e,t,r){"use strict";r.r(t);var o=r("f3f3"),n=(r("d3b7"),r("25f0"),r("2a48")),i=r("2f62"),a={name:"VideoManager",i18n:r("89fe"),components:{},data:function(){return{editVisible:!1,AddForm:this.$form.createForm(this),EditForm:this.$form.createForm(this),radioValue:1,visible:!1,addVisible:!1,messageShowLoad:!1,videoList:[],editUuid:"",IsRecord:!1,columns:[{width:"10%",slotName:"configComponent.video.TableVideoName",scopedSlots:{customRender:"Name",title:"configComponent.video.TableVideoName"},dataIndex:"Name"},{slotName:"configComponent.video.TableVideoIP",width:"10%",scopedSlots:{customRender:"IP",title:"configComponent.video.TableVideoIP"},dataIndex:"ip"},{slotName:"configComponent.video.TableVideoPort",width:"5%",scopedSlots:{customRender:"Port",title:"configComponent.video.TableVideoPort"},dataIndex:"port"},{slotName:"configComponent.video.TableVideoPassword",width:"10%",scopedSlots:{customRender:"Password",title:"configComponent.video.TableVideoPassword"},dataIndex:"password"},{slotName:"configComponent.video.TableVideoUser",width:"10%",scopedSlots:{customRender:"User",title:"configComponent.video.TableVideoUser"},dataIndex:"user"},{slotName:"configComponent.video.TableVideoStatus",width:"5%",scopedSlots:{customRender:"Status",title:"configComponent.video.TableVideoStatus"},dataIndex:"status"},{slotName:"configComponent.video.TableVideoOpt",width:"10%",scopedSlots:{customRender:"Opt",title:"configComponent.video.TableVideoOpt"}}],pagination:{pageSize:15,showSizeChanger:!0}}},computed:Object(o.a)({},Object(i.e)("setting",["videoServer"])),authorize:{},mounted:function(){this.getSystemVideoList()},activated:function(){},created:function(){},watch:{},methods:{goToEdit:function(e){this.editUuid=e.uuid;var t=this;this.editVisible=!0,this.IsRecord=e.IsRecord,this.$message.loading(this.$t("monitor.loading"),.5),setTimeout((function(){t.EditForm.setFieldsValue({name:e.Name,ip:e.ip,port:e.port.toString(),user:e.user,password:e.password,RtspUrl:e.url,RecordInter:e.RecordInter.toString()})}),500)},editVideoAction:function(){var e=this,t=this;this.EditForm.validateFields((function(r){if(!r){var o={uuid:t.editUuid,data:{name:e.EditForm.getFieldValue("name"),ip:e.EditForm.getFieldValue("ip"),port:parseInt(e.EditForm.getFieldValue("port")),user:e.EditForm.getFieldValue("user"),password:e.EditForm.getFieldValue("password"),StreamURL:e.EditForm.getFieldValue("RtspUrl"),IsRecord:e.EditForm.getFieldValue("IsRecord")?1:2,RecordInter:parseInt(e.EditForm.getFieldValue("RecordInter"))}};Object(n.j)(o).then((function(e){0==e.data.code?(t.getSystemVideoList(),t.$message.success(t.$t("alarm.trigger.EditSuccess")),t.editVisible=!1):t.$message.success(t.$t("VideoManager.EditFailed"))}))}}))},AddVideoAction:function(){var e=this,t=this;this.AddForm.validateFields((function(r){if(!r){var o={name:e.AddForm.getFieldValue("name"),ip:e.AddForm.getFieldValue("ip"),port:parseInt(e.AddForm.getFieldValue("port")),user:e.AddForm.getFieldValue("user"),password:e.AddForm.getFieldValue("password"),url:e.AddForm.getFieldValue("RtspUrl"),IsRecord:e.AddForm.getFieldValue("IsRecord")?1:2,RecordInter:parseInt(e.AddForm.getFieldValue("RecordInter"))};Object(n.h)(o).then((function(e){0==e.data.code?(t.getSystemVideoList(),t.addVisible=!1):t.$message.success(t.$t("alarm.trigger.AddFailed"))}))}}))},getSystemVideoList:function(){var e=this;e.messageShowLoad=!0,e.videoList=[],Object(n.k)().then((function(t){if(null!=t.data.list)for(var r={},o=0;o<t.data.list.length;o++)r.key=t.data.list[o].Uuid,r.ip=t.data.list[o].Ip,r.Name=t.data.list[o].Name,r.port=t.data.list[o].Port,r.password=t.data.list[o].Password,r.user=t.data.list[o].User,r.status=t.data.list[o].Status,r.uuid=t.data.list[o].Uuid,r.url=t.data.list[o].StreamURL,r.isUsed=t.data.list[o].IsUsed,r.uuid=t.data.list[o].Uuid,r.IsRecord=1==t.data.list[o].IsRecord,r.RecordInter=t.data.list[o].RecordInter,e.videoList.push(r),r={};e.messageShowLoad=!1})).catch((function(t){e.messageShowLoad=!1}))},showModal:function(){this.visible=!0},selectVideo:function(e,t,r){var o="";o=1==e?"webrtc://"+this.videoServer+"/webrtcstream/"+t:t,this.$emit("onSelectVideo",{type:e,key:t,url:o,name:r}),this.visible=!1},delVideo:function(e){var t=this,r={uuid:e};Object(n.i)(r).then((function(e){0==e.data.code?(t.getSystemVideoList(),t.$message.success(t.$t("component.systemImageModel.delImageSuccess"))):t.$message.error(t.$t("component.systemImageModel.delImageFailed"))}))},StopOrStartVideo:function(e,t){var r=this,o={uuid:t,data:{IsUsed:e}};Object(n.c)(o).then((function(e){0==e.data.code?(r.getSystemVideoList(),r.$message.success(r.$t("monitor.OptResultSuccess"))):r.$message.success(r.$t("monitor.OptResultFailed"))}))},handleCancel:function(){this.visible=!1}}},s=(r("a4cc"),r("2877")),d=Object(s.a)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",[r("a-button",{attrs:{type:"primary"},on:{click:function(t){e.addVisible=!0}}},[e._v(" "+e._s(e.$t("configComponent.video.AddVideo"))+" ")]),r("a-divider",{attrs:{type:"vertical"}}),r("a-button",{attrs:{disabled:e.messageShowLoad,type:"default"},on:{click:function(t){return e.getSystemVideoList()}}},[e._v(" "+e._s(e.$t("configComponent.video.VideoRefresh"))+" ")]),r("div",{staticStyle:{"margin-top":"5px"}},[r("a-table",{attrs:{rowKey:"Name",pagination:e.pagination,columns:e.columns,"data-source":e.videoList},scopedSlots:e._u([{key:"Status",fn:function(t){return r("span",{},[1==t?r("div",{staticStyle:{color:"#74f808"}},[e._v(" "+e._s(e.$t("configComponent.video.VideoOnline"))+" ")]):0==t?r("div",{staticStyle:{color:"#ea1111"}},[e._v(" "+e._s(e.$t("configComponent.video.VideoOffline"))+" ")]):e._e()])}},{key:"Opt",fn:function(t,o){return r("div",{},[r("a",{staticStyle:{cursor:"pointer",color:"#13C2C2"},attrs:{type:"link"},on:{click:function(t){return e.goToEdit(o)}}},[r("a-icon",{attrs:{type:"edit"}}),r("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("monitor.nodeEdit")))])],1),e._v(" | "),r("a-popconfirm",{attrs:{title:e.$t("configComponent.video.DelVideoConfirm"),"ok-text":e.$t("component.systemImageModel.delImageYes"),"cancel-text":e.$t("component.systemImageModel.delImageNo")},on:{confirm:function(t){return e.delVideo(o.uuid)}}},[r("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),r("a-icon",{attrs:{type:"delete",theme:"twoTone","two-tone-color":"#eb2f96"}}),r("a",{staticStyle:{color:"#eb2f96"}},[e._v(e._s(e.$t("configComponent.video.DelVideo")))]),e._v(" | ")],1),o.isUsed?e._e():r("a-popconfirm",{attrs:{title:e.$t("monitor.NotUseTips"),"ok-text":e.$t("component.systemImageModel.delImageYes"),"cancel-text":e.$t("component.systemImageModel.delImageNo")},on:{confirm:function(t){return e.StopOrStartVideo(1,o.uuid)}}},[r("a",{staticStyle:{cursor:"pointer",color:"#F4A460"},attrs:{type:"link"}},[r("a-icon",{attrs:{type:"stop"}}),r("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("monitor.NotUse")))])],1)]),o.isUsed?r("a",{staticStyle:{cursor:"pointer",color:"#00FF00"},attrs:{type:"link"},on:{click:function(t){return e.StopOrStartVideo(0,o.uuid)}}},[r("a-icon",{attrs:{type:"play-circle"}}),r("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("monitor.HadUse")))])],1):e._e()],1)}}])},[e._l(e.columns,(function(t,o){return r("template",{slot:t.slotName},[r("span",{key:o},[e._v(e._s(e.$t(t.slotName)))])])}))],2)],1),r("a-modal",{attrs:{title:e.$t("configComponent.video.AddVideo")},on:{ok:e.AddVideoAction},model:{value:e.addVisible,callback:function(t){e.addVisible=t},expression:"addVisible"}},[r("a-form",{attrs:{form:e.AddForm,"label-col":{span:7},"wrapper-col":{span:12}}},[r("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoName")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0}]}],expression:"[\n              'name',\n              { rules: [{ required: true}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoIP")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ip",{rules:[{required:!0}]}],expression:"[\n              'ip',\n              { rules: [{ required: true}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoPort")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["port",{rules:[{required:!0}]}],expression:"[\n              'port',\n              { rules: [{ required: true}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.RtspUrl")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["RtspUrl",{rules:[{required:!0}]}],expression:"[\n              'RtspUrl',\n              { rules: [{ required: true}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoUser")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["user",{rules:[{required:!1}]}],expression:"[\n              'user',\n              { rules: [{ required: false}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoPassword")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!1}]}],expression:"[\n              'password',\n              { rules: [{ required: false}] },\n            ]"}],attrs:{type:"password"}})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.IsRecord")}},[r("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["IsRecord",{rules:[{required:!1}]}],expression:"[\n              'IsRecord',\n              { rules: [{ required: false}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.RecordInter")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["RecordInter",{rules:[{required:!1}]}],expression:"[\n              'RecordInter',\n              { rules: [{ required: false}] },\n            ]"}]})],1)],1)],1),r("a-modal",{attrs:{title:e.$t("configComponent.video.AddVideo")},on:{ok:e.editVideoAction},model:{value:e.editVisible,callback:function(t){e.editVisible=t},expression:"editVisible"}},[r("a-form",{attrs:{form:e.EditForm,"label-col":{span:7},"wrapper-col":{span:12}}},[r("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoName")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0}]}],expression:"[\n              'name',\n              { rules: [{ required: true}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoIP")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ip",{rules:[{required:!0}]}],expression:"[\n              'ip',\n              { rules: [{ required: true}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoPort")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["port",{rules:[{required:!0}]}],expression:"[\n              'port',\n              { rules: [{ required: true}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.RtspUrl")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["RtspUrl",{rules:[{required:!0}]}],expression:"[\n              'RtspUrl',\n              { rules: [{ required: true}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoUser")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["user",{rules:[{required:!1}]}],expression:"[\n              'user',\n              { rules: [{ required: false}] },\n            ]"}]})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoPassword")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!1}]}],expression:"[\n              'password',\n              { rules: [{ required: false}] },\n            ]"}],attrs:{type:"password"}})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.IsRecord")}},[r("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["IsRecord",{rules:[{required:!1}]}],expression:"[\n              'IsRecord',\n              { rules: [{ required: false}] },\n            ]"}],model:{value:e.IsRecord,callback:function(t){e.IsRecord=t},expression:"IsRecord"}})],1),r("a-form-item",{attrs:{label:e.$t("configComponent.video.RecordInter")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["RecordInter",{rules:[{required:!1}]}],expression:"[\n              'RecordInter',\n              { rules: [{ required: false}] },\n            ]"}]})],1)],1)],1)],1)}),[],!1,null,"2bbe5a47",null);t.default=d.exports},a4cc:function(e,t,r){"use strict";r("3c1d")}}]);